function C(n){return function(){return this[n]}}
(function(n,o){function G(){var f=false;if("Prototype"in n){var d=parseFloat(n.Prototype.Version.substring(0,3));if(d>1.6||d==1.6&&parseInt(n.Prototype.Version.charAt(4))>=1)f=true}return f}function O(){T();U();G()&&H()&&"Sound"in n&&P()}function H(){return"swfobject"in n&&"embedSWF"in n.swfobject}function Q(){"Sound"in n||I(x+v.soundjs,function(){n.Sound.swfPath=x+"lib/Sound.swf";G()&&H()&&"Sound"in n&&P()})}function T(){Element.addMethods({setStyleI:function(){return o.documentElement.style.setProperty?function(f,
d,c){f.style.setProperty(d,c,"important")}:function(f,d,c){f.style.cssText+=";"+d+":"+c+" !important;"}}()})}function U(){Element.addMethods({setRotation:n.CSSMatrix?function(f,d){f.style.transform="rotate("+(d||0)+"rad)";return f}:n.WebKitCSSMatrix?function(f,d){f.style.webkitTransform="rotate("+(d||0)+"rad)";return f}:Prototype.Browser.Gecko?function(f,d){f.style.MozTransform="rotate("+(d||0)+"rad)";return f}:Prototype.Browser.IE?function(f,d){if(!f.S)f.S=[f.offsetWidth,f.offsetHeight];var c=Math.cos(d||
0)*1,s=Math.sin(d||0)*1;try{var t=f.filters("DXImageTransform.Microsoft.Matrix");t.M11=c;t.M21=-s;t.M12=s;t.M22=c}catch(y){f.style.filter+=" progid:DXImageTransform.Microsoft.Matrix(sizingMethod='auto expand',M11="+c+",M12="+-s+",M21="+s+",M22="+c+")"}f.style.marginLeft=(f.S[0]-f.offsetWidth)/2+"px";f.style.marginTop=(f.S[1]-f.offsetHeight)/2+"px";return f}:function(f){return f}})}function V(){}function I(f,d){d=typeof d=="function"?d:V;var c=o.createElement("script");c.type="text/javascript";c.loaded=
false;c.setAttribute("async","true");c.onload=c.onreadystatechange=function(){if(!this.readyState||this.readyState=="loaded"||this.readyState=="complete"){c.loaded=true;d.apply(this,arguments)}};c.src=f;o.getElementsByTagName("head")[0].appendChild(c);return c}function P(){console.log("all libs loaded!");var f=Class.create({d:function(a,b){h.B.k=this;if(a.ha("main.js"))a=a.substring(0,a.lastIndexOf("main.js"));this.O=a.ha("/")?a:a+"/";Object.extend(this,Object.extend(Object.c(h.B.b),b||{}));this.$a(this.ia);
this.loaded=this.W=false;this.startTime=-1;this.a=[];this.o={load:[],start:[],stopping:[],stopped:[]};h.p.color="000000";var e=this;this.D=function(){e.cb()};this.ka("main.js",this.Ua.g(this))},T:function(a){if(a.parent!==this){a.parent&&a.parent.M(a);this.a.push(a);h.p.element.V(a);a.parent=this;a.r()}return this},M:function(a){var b=this.a.indexOf(a);if(b>-1){this.a.remove(b);a.toElement().remove();a.parent=null}return this},ka:function(a,b){h.ka(this.O+a,Object.yb(b)?b.g(h.B.k):Prototype.U);return this},
Ua:function(){this.loaded=true;this.o.load.v("call",this);this.Na===true&&this.start()},e:function(a,b){if(!(a in this.o))throw"SGF.Game#observe: '"+a+"' is not a recognized event name.";if(typeof b!=="function")throw"'handler' must be a Function.";this.o[a].push(b);return this},now:function(){return"now"in Date?Date.now:function(){return(new Date).getTime()}}(),f:function(a){for(var b=0;b<this.a.length;b++)this.a[b].f&&this.a[b].f(a,this.na);this.na++;this.Qa++},$a:function(a){this.ia=a;this.Za=
1E3/a},start:function(){h.log("Starting "+this.O);h.C.u||h.C.ja();h.C.focus();this.W=true;this.startTime=this.la=this.now();this.qa=this.na=0;h.fb&&h.$?h.$(this.D):setTimeout(this.D,0);this.o.start.v("call",this);this.Qa=this.db=0;this.Nb=this.now()},cb:function(){if(!this.W)return this.pa();for(var a=0;this.now()>this.la&&a<this.Va;){this.update();this.la+=this.Za;a++}h.p.reset();this.f(0);h.fb&&h.$?h.$(this.D):setTimeout(this.D,0)},stop:function(){this.o.Ob.v("call",this);this.W=false;return this},
pa:function(){h.C.u&&h.C.ma();h.p.eb(true);h.B.k=null;this.o.pa.v("call",this)},update:function(){for(var a=0;a<this.a.length;a++)this.a[a].update&&this.a[a].update(this.qa);this.qa++;this.db++},P:function(a){return((parseInt(a)||0)+1)*1E3}});Object.extend(f,{b:{Na:true,ia:30,Va:5},k:null});console.log("Game");var d=function(){function a(){return(isFullScreen&&o.documentElement.clientWidth!==0?o.documentElement.clientWidth:d.element.clientWidth)/e}function b(){return(isFullScreen&&o.documentElement.clientHeight!==
0?o.documentElement.clientHeight:d.element.clientHeight)/e}var e=1,p=null;isFullScreen=false;return{eb:function(i){var m=null;if(Boolean(i)==false)i="none";if(Object.Ta(i)){i=i.toLowerCase();if("default"==i)m="default";else if("crosshair"==i)m="crosshair";else if("hand"==i)m="pointer";else if("move"==i)m="move";else if("text"==i)m="text";else if("wait"==i)m="wait";else if("none"==i)m="url("+x+"blank."+(Prototype.hb.lb?"cur":"gif")+"), none"}d.element.style.cursor=m},width:0,height:0,element:null,
g:function(i){i.style.padding=0;i.style.overflow="hidden";if(i.style.MozUserSelect!==undefined)i.style.MozUserSelect="moz-none";else if(i.style.gb!==undefined)i.style.gb="none";Element.Bb(i);Element.Ra(i).Pb($("webSocketContainer")).v("remove");var m=d.element;m!==null&&Object.xb(m)&&Element.Ra(m).v("remove").Pa(i.V,i);d.element=i;if(c&&c.u){c.ma();c.ja()}isFullScreen=i===o.body},L:a,K:b,m:function(){return e},Kb:function(i){e=i;if(f.k!=null){i=f.k.a;for(var m=0;m<i.length;m++)i[m].scale(e)}},reset:function(){d.width=
a();d.height=b();if(d.color!=p){d.element.style.backgroundColor="#"+d.color;p=d.color}}}}();console.log("Screen");var c=function(){function a(g){var k=u(g);z&&k.x>=0&&k.y>=0&&k.x<=d.L()&&k.y<=d.K()&&g.stop()}function b(g){g.ctrlKey||g.metaKey||g.altKey||z&&g.stop()}function e(g){if(!(g.ctrlKey||g.metaKey||g.altKey))if(z){g.stop();if(B[g.keyCode]!==true){var k=r.keydown,l=0,j={keyCode:g.keyCode,shiftKey:g.shiftKey};for(B[g.keyCode]=true;l<k.length;l++)k[l](Object.c(j))}}}function p(g){if(!(g.ctrlKey||
g.metaKey||g.altKey))if(z){g.stop();if(B[g.keyCode]!==false){var k=r.Ab,l=0,j={keyCode:g.keyCode,shiftKey:g.shiftKey};for(B[g.keyCode]=false;l<k.length;l++)k[l](Object.c(j))}}}function i(g){var k=r.Cb,l=0,j=u(g);j.button=g.button;if(j.x>=0&&j.y>=0&&j.x<=d.L()&&j.y<=d.K()){D();g.stop();n.focus();R[g.button]=true;c.w=j.x;for(c.z=j.y;l<k.length;l++)k[l](Object.c(j))}else S()}function m(g){var k=r.Eb,l=0,j=u(g);j.button=g.button;if(j.x>=0&&j.y>=0&&j.x<=d.L()&&j.y<=d.K()){D();g.stop();n.focus();R[g.button]=
false;c.w=j.x;for(c.z=j.y;l<k.length;l++)k[l](Object.c(j))}}function q(g){var k=r.Db,l=0,j=u(g);if(j.x>=0&&j.y>=0&&j.x<=d.L()&&j.y<=d.K()&&(c.w!==j.x||c.z!==j.y)){D();g.stop();c.w=j.x;for(c.z=j.y;l<k.length;l++)k[l](Object.c(j))}}function u(g){var k=d.element.ub(),l=d.m();return{x:(g.w()-k.left)/l,y:(g.z()-k.top)/l}}function S(){z=false}function D(){z=true}var r={mousemove:[],mousedown:[],mouseup:[],keydown:[],keyup:[]},B={},R={},z=false;return{rb:0,qb:1,sb:2,sa:Event.sa,va:Event.va,ta:Event.ta,ua:Event.ua,
mb:32,nb:33,ob:34,pb:35,e:function(g,k){if(!(g in r))throw"SGF.Input.observe: '"+g+"' is not a recognized event name.";if(typeof k!=="function")throw"'handler' must be a Function.";r[g].push(k);return this},l:function(g,k){if(!(g in r))throw"SGF.Input.stopObserving: '"+g+"' is not a recognized event name.";if(typeof k!=="function")throw"'handler' must be a Function.";var l=r[g].indexOf(k);if(l>-1){var j=r[g],W=j.slice(l+1||j.length);j.length=l<0?j.length+l:l;j.push.apply(j,W)}return this},zb:function(g){return B[g]===
true},w:0,z:0,u:false,ja:function(){o.e("keydown",e).e("keypress",b).e("keyup",p).e("mousemove",q).e("mousedown",i).e("mouseup",m).e("contextmenu",a);c.u=true},ma:function(){o.l("keydown",e).l("keypress",b).l("keyup",p).l("mousemove",q).l("mousedown",i).l("mouseup",m).l("contextmenu",a);c.u=false},focus:D,blur:S}}();console.log("Input");var s=Class.create({d:function(){throw"The HTML/DOM client is not capable of starting a Server.";},start:null,stop:null,Jb:null,Hb:null,Fb:null,Gb:null});s.tb=false;
console.log("Server");var t=Class.create({d:function(a,b){Object.extend(this,Object.extend(Object.c(h.ib.b),b||{}));this.URL=a;this.Aa=this.Ea.g(this);this.ya=this.Ca.g(this);this.za=this.Da.g(this);this.Ma===true&&this.Oa()},Ya:Prototype.U,Wa:Prototype.U,Xa:Prototype.U,Oa:function(){this.j=new WebSocket(this.URL);this.j.onopen=this.Aa;this.j.onclose=this.ya;this.j.onmessage=this.za},close:function(){this.j&&this.j.close()},send:function(a){this.j.send(a)},Ea:function(){this.Ya()},Ca:function(){this.Wa();
this.j=null},Da:function(a){this.Xa(a.data)}});Object.extend(t,{b:{Ma:false},CONNECTING:0,OPEN:1,CLOSED:2});console.log("Client");var y=Class.create({d:function(a){if(!Object.Ta(a))throw"SGF.Font constructor expects a path, data URI, or font name.";this.s="SGF_font"+(Math.random()*1E4).round();if(a.oa("data:"))this.Ka=h.ra.ga('@font-face {  font-family: "'+this.s+'";  src: url("'+a+'");}');else if(a.ha(".ttf"))this.Ka=h.ra.ga('@font-face {  font-family: "'+this.s+'";  src: url("'+(a.oa("http:")||
a.oa("https:")?"":h.B.k.O)+a+'");}');else this.s=a}});y.ga=function(a){var b=new Element("style",{type:"text/css"});if(b.styleSheet)b.styleSheet.cssText=a;else b.appendChild(o.createTextNode(a));o.getElementsByTagName("head")[0].appendChild(b);return b};console.log("Font");var A=Class.create({d:function(a){Object.extend(this,Object.extend(Object.c(h.jb.b),a||{}));this.element=this.J();this.scale(h.p.m())},J:function(){var a=o.createElement("div");Element.setStyleI(a,"position","absolute");Element.setStyleI(a,
"overflow","hidden");return function(){return a.cloneNode(false)}}(),toElement:C("element"),left:C("x"),top:C("y"),right:function(){return this.x+this.width-1},bottom:function(){return this.y+this.height-1},f:function(a){var b=h.p.m();if(this.Ha!=this.rotation){Element.setRotation(this.element,this.rotation);this.Ha=this.rotation}if(this.Fa!=this.opacity){Element.setOpacity(this.element,this.opacity);this.Fa=this.opacity}if(this.La!=this.zIndex){this.r();this.La=this.zIndex}if(this.G!=this.width){Element.setStyleI(this.element,
"width",this.width*b+"px");this.G=this.width}if(this.F!=this.height){Element.setStyleI(this.element,"height",this.height*b+"px");this.F=this.height}if(this.H!==0){Element.setStyleI(this.element,"left",(this.x+this.H*a)*b+"px");this.Q=this.x}else if(this.Q!=this.x){this.Q=this.x;Element.setStyleI(this.element,"left",this.x*b+"px")}if(this.I!==0){Element.setStyleI(this.element,"top",(this.y+this.I*a)*b+"px");this.R=this.y}else if(this.R!=this.y){this.R=this.y;Element.setStyleI(this.element,"top",this.y*
b+"px")}},scale:function(a){Element.setStyleI(this.element,"width",this.width*a+"px");Element.setStyleI(this.element,"height",this.height*a+"px");Element.setStyleI(this.element,"top",this.y*a+"px");Element.setStyleI(this.element,"left",this.x*a+"px");this.G=this.width;this.F=this.height;this.Q=this.x;this.R=this.y},update:function(){if(this.H!==0)this.x+=this.H;if(this.I!==0)this.y+=this.I},r:function(){Element.setStyleI(this.element,"z-index",this.parent&&this.parent.P?this.parent.P(this.zIndex):
this.zIndex)}});A.b={width:10,height:10,x:0,y:0,H:0,I:0,opacity:1,rotation:0,zIndex:0,parent:null};console.log("Component");var X=Class.create({d:function(a){this.src=a;this.loaded=false}});console.log("Sound");var J=Class.create(A,{d:function($super,b,e){this.a=[];$super(Object.extend(Object.c(h.kb.b),e||{}));Object.wb(b)&&b.Pa(this.T,this);this.ca=this.i=true},update:function($super,b){$super(b);if(this.ca)for(var e=0;e<this.a.length;e++)this.a[e].update&&this.a[e].update(b)},f:function($super,
b,e){$super(b,e);this.i&&this.ba(b,e)},ba:function(a,b){for(var e=0;e<this.a.length;e++)this.a[e].f&&this.a[e].f(a,b)},scale:function($super,b){$super(b);for(var e=0;e<this.a.length;e++)this.a[e].scale(b)},T:function(a){if(a.parent!==this){a.parent&&a.parent.M(a);this.a.push(a);this.element.V(a);a.parent=this;a.r()}return this},M:function(a){var b=this.a.indexOf(a);if(b>-1){this.a.remove(b);a.element.remove();a.parent=null}return this},P:function(a){return(parseInt(this.element.style.zIndex)||0)+
(parseInt(a)||0)},r:function($super){$super();for(var b=0;b<this.a.length;b++)this.a[b].r()}});J.b={};console.log("Container");var Y=Class.create(J,{d:function($super,b,e){$super(b,e);this.ca=this.i=false},T:function($super,b){$super(b);this.i=true;return this},M:function($super,b){$super(b);this.i=true;return this},f:function($super,b,e){if(this.width!=this.G||this.height!=this.F)this.i=true;$super(b,e)},ba:function($super,b,e){$super(b,e);this.i=false},Ib:function(){this.i=true}});console.log("DumbContainer");
var w=Class.create(A,{d:function($super,b){$super(Object.extend(Object.c(w.b),b||{}));this.t="";this.fa=o.createTextNode(this.t);this.element.appendChild(this.fa)},J:function(){var a=o.createElement("pre");$H({border:"none 0px #000000","background-color":"transparent",position:"absolute",overflow:"hidden",margin:"0px",padding:"0px"}).each(function(b){Element.setStyleI(a,b.key,b.value)});return function(){var b=this.size*d.m()+"px",e=a.cloneNode(false);Element.setStyleI(e,"color","#"+this.color);this.q=
this.color;Element.setStyleI(e,"font-family",this.font.s);this.aa=this.font;Element.setStyleI(e,"font-size",b);Element.setStyleI(e,"line-height",b);this.da=this.size;return e}}(),f:function($super,b){$super(b);if(this.xa!==this.align){Element.setStyleI(this.element,"text-align",this.align==0?"left":this.align==1?"center":"right");this.xa=this.align}if(this.aa!==this.font){Element.setStyleI(this.element,"font-family",this.font.s);this.aa=this.font}if(this.da!==this.size){var e=this.size*d.m()+"px";
Element.setStyleI(this.element,"font-size",e);Element.setStyleI(this.element,"line-height",e);this.da=this.size}if(this.q!==this.color){Element.setStyleI(this.element,"color","#"+this.color);this.q=this.color}if(this.ea===true){e="";for(var p=this.t.length,i=0,m=0,q,u;i<p;i++){q=this.t.charAt(i);if(q==="\n"){m=0;e+=q}else if(q==="\t"){q=w.wa-m%w.wa;for(u=0;u<q;u++)e+=" ";m+=q}else{e+=q;m++}}if(w.Sa)e=e.replace(/\n/g,"\r");this.fa.nodeValue=e;this.ea=false}},vb:C("t"),Mb:function(a){this.t=a;this.ea=
true}});Object.extend(w,{DEFAULTS:{align:0,color:"FFFFFF",font:new y("monospace"),size:12},LEFT:0,CENTER:1,RIGHT:2,TAB_WIDTH:4});var K=w;/MSIE (\d+\.\d+);/.test(navigator.userAgent);K.Sa=new Number(RegExp.$1)<=7;console.log("Label");K=Class.create({d:function(a,b,e){this.bb=b;this.ab=e;this.height=this.width=-1;this.loaded=false;var p=[];this.n=new Image;this.n.onload=function(){this.width=this.n.width;this.height=this.n.height;this.loaded=true;for(var i=0;i<p.length;i++)p[i].call(this,this)}.g(this);
this.src=this.n.src=f.k.O+a;this.n.style.position="absolute";this.e=function(i,m){p.push(m);return this}},toElement:function(){return this.n.cloneNode(true)}});console.log("Spriteset");var L=Class.create(A,{d:function($super,b,e){this.h=b;this.A=b.toElement();$super(Object.extend(Object.c(L.b),e||{}))},J:function($super){return $super().V(this.A)},scale:function($super,b){$super(b);this.h.loaded?this.N():this.h.e("load",this.N.g(this))},f:function($super,b,e){if(this.Ia!=this.Y||this.Ja!=this.Z||
this.G!=this.width||this.F!=this.height)if(this.h.loaded)this.N();else if(!this.Ga){this.h.e("load",this.N.g(this));this.Ga=true}$super(b,e)},N:function(){var a=d.m();this.A.X("width",this.h.width*(this.width/this.h.bb)*a+"px");this.A.X("height",this.h.height*(this.height/this.h.ab)*a+"px");this.A.X("top",-(this.height*this.Z*a)+"px");this.A.X("left",-(this.width*this.Y*a)+"px");this.Ia=this.Y;this.Ja=this.Z}});L.b={Y:0,Z:0};console.log("Sprite");var E=Class.create(A,{d:function($super,b){$super(Object.extend(Object.c(E.b),
b||{}))},f:function($super,b){if(this.Ba!=this.fill){if(this.fill){this.element.style.borderColor="transparent";this.element.style.backgroundColor="#"+this.color}else{this.element.style.backgroundColor="transparent";this.element.style.border="Solid 1px #"+this.color}this.Ba=this.fill}if(this.q!=this.color){if(this.fill)this.element.style.backgroundColor="#"+this.color;else this.element.style.borderColor="#"+this.color;this.q=this.color}$super(b)}});E.b={color:"000000",fill:true};console.log("Shape");
var M=Class.create(E,{d:function($super,b){$super(Object.extend(Object.c(M.b),b||{}))},J:function(){this.q=this.color;return(new Element("div")).Lb({position:"absolute",backgroundColor:"#"+this.color})}});M.b={};console.log("Rectangle");h.Game=f;h.Screen=d;h.Input=c;h.Server=s;h.Client=t;h.Font=y;h.Component=A;h.Sound=X;h.Container=J;h.DumbContainer=Y;h.Label=w;h.Spriteset=K;h.Sprite=L;h.Shape=E;h.Rectangle=M;n.SGF=h;v.game&&console.log(v.game);console.log("Load Time: "+((new Date).getTime()-Z.getTime())+
" ms")}var F=null,N=null,x=null,v={prototype:"lib/prototype.js",swfobject:"lib/swfobject.js",fabridge:"lib/fabridge.js",soundjs:"lib/sound.min.js"},h={},Z=new Date;(function(f){try{0()}catch(d){var c=d.stack;if(d.sourceURL)f(d.sourceURL);else if(d.arguments){c=c.split("\n")[2];c=c.substring(c.indexOf("(")+1);c=c.substring(0,c.lastIndexOf(":"));f(c.substring(0,c.lastIndexOf(":")))}else if(c){c=c.split("\n")[0];c=c.substring(c.indexOf("@")+1);f(c.substring(0,c.lastIndexOf(":")))}else{var s=n.onerror;
n.onerror=function(t,y){n.onerror=s;f(y);return true};throw d;}}})(function(f){F=f;x=F.substring(0,F.lastIndexOf("/")+1);a:{f=F;for(var d=o.getElementsByTagName("script"),c=d.length;c--;)if(d[c].src===f){N=d[c];break a}N=void 0}f=N;for(d=f.attributes.length;d--;){c=f.attributes[d].nodeName;if(c.indexOf("data-")===0)v[c.substring(5)]=f.getAttribute(c)}G()?O():I((v.prototype.indexOf("lib")===0?x:"")+v.prototype,O);H()?Q():I(x+v.swfobject,Q)})})(this,document);